{% extends 'base.html' %}
{% load thumbnail %}
{% load waffle_tags %}
{% load markup %}
{% load urlize_target_blank %}

{% block navbar %}
	<ul class="nav nav-justified">
      <li><button type="button" class="btn hubnav"
{% flag section_how %}
									data-toggle="collapse"
									data-target="#collapseOne"
{% endflag %}
									data-parent="#accordian">HOW</button></li>
      <li><button type="button" class="btn hubnav"
{% flag section_we %}
									data-toggle="collapse"
									data-target="#collapseTwo"
{% endflag %}
									data-parent="#accordian">WE</button></li>
      <li><button type="button" class="btn hubnav"
{% flag section_work %}
									data-toggle="collapse"
									data-target="#collapseThree"
{% endflag %}
									data-parent="#accordian">WORK</button></li>
      <li><button type="button" class="btn hubnav"
{% flag section_now %}
									data-toggle="collapse"
									data-target="#collapseFour"
{% endflag %}
									data-parent="#accordian">NOW</button></li>

		</ul>
{% endblock %}

{% block bodytag %}
{% if request.user.is_anonymous %}
<body class="" id="splash-page">
{% else %}
<body class="{% block bodyclass %}{% endblock %}" id="index-page{% block bodyid %}{% endblock %}">
{% endif %}
{% endblock %}

{% block content %}

{% if request.user.is_anonymous %}
<h1></h1>

<div class="" id="video-fallback">
<a href="#" 
   id="play-placeholder"
   style="color: #ddd"
	 onclick="$('#video2').show();$('#video2')[0].play();$('#play-placeholder').hide();return false">
	<img src="{{STATIC_URL}}img/spokehub_manifesto.png" id="main-placeholder"/>
</a>

<video class="video-js vjs-default-skin"
        id="video2" width="1920" height="1080">
	<source src="http://spokehub-video.s3.amazonaws.com/spokehub_manifesto.mp4?d={% now "U"%}">
	<source src="http://spokehub-video.s3.amazonaws.com/spokehub_manifesto.mp4?d={% now "U"%}"
        type="video/mp4">
</video>
</div>

<script>

// replace the autoplay attribute, only when the video
// is initially visible 

$(document).ready(function() {
   $('#play-placeholder').fadeIn("slow", function() {console.log('faded in')});
});

</script>
{% else %}

<div class="panel-group" id="accordion">
  <div class="panel panel-default">
    <a {% flag section_how %} data-toggle="collapse"
			 data-parent="#accordion" href="#collapseOne"{% endflag %}>
    	<div id="hub1" class="panel-heading">
      	<div class="panel-title"> 
         How
        </div>
        <div class="desc">Cross-functional conversations between Art, Design, and Strategy</div>
        <span class="glyphicon glyphicon-play"></span>
        
	    </div>
     </a>
{% flag section_how %}
    <div id="collapseOne" class="panel-collapse collapse">
      <div class="panel-body">
		<div class="container">
       	<div class="panelbreak white"></div>
			 {% if conversation %}

			 <form action="/item/{{conversation.id}}/reply/" method="post"
						 enctype="multipart/form-data" role="form">
				 <div class="modal fade" id="add-text-reply">
					 <div class="modal-dialog">
						 <div class="modal-content">
							 <div class="modal-header">
								 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								 <h4 class="modal-title">Add Reply</h4>
							 </div>
							 <div class="modal-body">

								 <div class="form-group">
									 <label for="comment-body">Comment</label>
									 <textarea name="body" class="form-control" rows="10"
														 id="comment-body"></textarea>
								 </div>

							 </div>
							 <div class="modal-footer">
								 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								 <input type="submit" class="btn btn-primary" value="Reply"/>
							 </div>
						 </div><!-- /.modal-content -->
					 </div><!-- /.modal-dialog -->
				 </div><!-- /.modal -->
			 </form>

			 <form action="/item/{{conversation.id}}/reply/" method="post"
						 enctype="multipart/form-data" role="form">
				 <div class="modal fade" id="add-link-reply">
					 <div class="modal-dialog">
						 <div class="modal-content">
							 <div class="modal-header">
								 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								 <h4 class="modal-title">Add Link Reply</h4>
							 </div>
							 <div class="modal-body">

								 <div class="form-group">
									 <label for="link-url">URL</label>
									 <input type="text" name="url" class="form-control"
									 id="link-url" placeholder="http://" />
								 </div>

								 <div class="form-group">
									 <label for="link-title">Link Title</label>
									 <input type="text" name="title" class="form-control"
									 id="link-title" />
								 </div>

							 </div>
							 <div class="modal-footer">
								 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								 <input type="submit" class="btn btn-primary" value="Reply"/>
							 </div>
						 </div><!-- /.modal-content -->
					 </div><!-- /.modal-dialog -->
				 </div><!-- /.modal -->
			 </form>

			 <form action="/item/{{conversation.id}}/reply/" method="post"
						 enctype="multipart/form-data" role="form">
				 <div class="modal fade" id="add-image-reply">
					 <div class="modal-dialog">
						 <div class="modal-content">
							 <div class="modal-header">
								 <button type="button" class="close" data-dismiss="modal" aria-hidden="true">&times;</button>
								 <h4 class="modal-title">Add Image Reply</h4>
							 </div>
							 <div class="modal-body">

								 <div class="form-group">
									 <label for="exampleInputFile">Image</label>
									 <input type="file" id="image" name="image">
								 </div>

								 <div class="form-group">
									 <label for="comment-body">Caption</label>
									 <textarea name="body" class="form-control" rows="10"
														 id="comment-body"></textarea>
								 </div>

							 </div>
							 <div class="modal-footer">
								 <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
								 <input type="submit" class="btn btn-primary" value="Reply"/>
							 </div>
						 </div><!-- /.modal-content -->
					 </div><!-- /.modal-dialog -->
				 </div><!-- /.modal -->
			 </form>


       <h2>{{conversation.title}}</h2>
			 {{conversation.body|markdown}}
			 <div class="panelbreak white"></div>
			 <div class="addvoice">
			 	<p>Join the conversation:
				 <ul class="list-inline">
					 <li><a href="#add-text-reply" data-toggle="modal" data-target="#add-text-reply"><img src="/media/img/text_convo.png"></a></li>
					 <li><a href="#add-link-reply" data-toggle="modal" data-target="#add-link-reply" ><img src="/media/img/link_convo.png"></a></li>
					 <li><a href="#add-image-reply" data-toggle="modal" data-target="#add-image-reply"><img src="/media/img/image_convo.png"></a></li>
				 </ul>
			 </p>
			 </div>
			 			 <div class="panelbreak white"></div>

			  <div class="hubconvo">

				{% for reply_one, reply_two in conversation.reply_pairs %}

				 <div class="row">
					 <div class="col-sm-1 col-md-1">
						 <a href="/accounts/{{reply_one.author.username}}/"><img class="mugshot" src="{{ reply_one.author.get_profile.get_mugshot_url }}" 
									class="user_icon" width="100" height="100"></a>
						 </div>
					<div class="col-sm-5 col-md-5">
						<div class="convoblock">
							<div class="convoheader">
								<div class="user_name"><a href="/accounts/{{reply_one.author.username}}/">{{reply_one.author.username}}</a>
								| {{reply_one.author.get_profile.discipline1}}{% if reply_one.author.get_profile.discipline2 %} /
								{{reply_one.author.get_profile.discipline2}}{% endif %}</div>
								<div class="user_time">{{reply_one.added|timesince}}
								ago  |  {{reply_one.author.get_profile.city}}, {{reply_one.author.get_profile.country}}</div>
								</div>
								       <div class="panelbreak black"></div>
								       
								<div class="convocontent">
										{% if reply_one.url %}
								<h3><a target="_blank" href="{{reply_one.url}}"><span class="glyphicon glyphicon-link"></span>{% if reply_one.title %}
								{{reply_one.title}}{% else %}{{reply_one.url}}{% endif %}</h3>
								{% endif %}
								{{reply_one.body|markdown}}
											 {% if reply_one.image %}
											 <img src="{% thumbnail reply_one.image 400x400 %}" />
								{% endif %}
								</div>
						</div>
					</div>
{% if reply_two %}
					<div class="col-sm-5 col-md-5">
						<div class="convoblock">
							<div class="convoheader">
								<div class="user_name"><a href="/accounts/{{reply_two.author.username}}/">{{reply_two.author.username}}</a>
									| {{reply_two.author.get_profile.discipline1}}
									{% if reply_two.author.get_profile.discipline1 %}
									/ {{reply_two.author.get_profile.discipline2}}{% endif %}</div>
								<div class="user_time">{{reply_two.added|timesince}} ago  |  {{reply_two.author.get_profile.city}}, {{reply_two.author.get_profile.country}}</div>
								</div>
								 <div class="panelbreak black"></div>
									{% if reply_two.url %}
									<h3><a target="_blank" href="{{reply_two.url}}"><span class="glyphicon glyphicon-link"></span>{% if reply_two.title %}
									{{reply_two.title}}{% else %}{{reply_two.url}}{% endif %}</h3>
									{% endif %}
											 {{reply_two.body|markdown}}
											 {% if reply_two.image %}
											 <img src="{% thumbnail reply_two.image 400x400 %}" />
								{% endif %}
								
						</div>
					</div>
					<div class="col-sm-1 col-md-1">
						 <a href="/accounts/{{reply_two.author.username}}/"><img class="mugshot" src="{{ reply_two.author.get_profile.get_mugshot_url }}" 
									class="user_icon" width="100" height="100"></a>
					</div>
{% endif %}
				 </div>
				 {% endfor %}

				</div>
			 {% else %}

			 <p>No conversations yet...</p>
			 {% endif %}

				</div>
      </div>
    </div>
{% endflag %}
  </div>
			 
		

  <div class="panel panel-default">
  <a {% flag section_we %}data-toggle="collapse"
		 data-parent="#accordion" href="#collapseTwo"{% endflag %}>
  	 <div id="hub2" class="panel-heading">
      <div class="panel-title">
          We        
      </div>
      <div class="desc">A MANIFESTO OF (TROUBLE) MAKERS</div>
      <span class="glyphicon glyphicon-play"></span>
    </div>
      </a>
{% flag section_we %}
    <div id="collapseTwo" class="panel-collapse collapse">
      <div class="panel-body">
				<div class="container video">
<iframe src="//player.vimeo.com/video/104999392?portrait=0&badge=0&byline=0&title=0" width="900"height="506" frameborder="0" webkitallowfullscreen
				mozallowfullscreen allowfullscreen></iframe>
				</div>
      </div>
    </div>
{% endflag %}
  </div>

  <div class="panel panel-default">
<a {% flag section_work %} data-toggle="collapse"
	 data-parent="#accordion" href="#collapseThree"{% endflag %}>  	
    <div id="hub3" class="panel-heading">
      <div class="panel-title">
          Work        
      </div>
      <div class="desc">Shiny ideas + blood, sweat and tears</div>
      <span class="glyphicon glyphicon-play"></span>
    </div>
</a>
{% flag section_work %}
    <div id="collapseThree" class="panel-collapse collapse">
      <div class="panel-body">
      	
<div id="slider1_container" style="position: relative; top: 0px; left: 0px; width: 1200px; height: 600px; overflow: hidden;">
    <!-- Slides Container -->
    <div u="slides" style="cursor: move; position: absolute; overflow: hidden; left: 0px; top: 0px; width: 1200px; height: 600px;">
    	{% for ws in work_samples %}	
        <div>
        	<img u="image" src="{% thumbnail ws.image 1140x700 %}" alt="{{ws.title}}"/>
        	<div class="slide_caption" style="position: absolute; top: 540px; left: 75px; font-size: 20px; width: 350px; height: 50px;">
     		 {{ws.title}} by {{ws.user.username}} 
			</div>
       </div>
       {% endfor %}
    </div>
    
    <!-- Trigger -->
    
	 <!-- Arrow Navigator Skin Begin -->
        <style>

            .jssora21l, .jssora21r, .jssora21ldn, .jssora21rdn
            {
            	position: absolute;
            	cursor: pointer;
            	display: block;
                background: url(/media/img/a21.png) center center no-repeat;
                overflow: hidden;
            }
            .jssora21l { background-position: -3px -33px; }
            .jssora21r { background-position: -63px -33px; }
            .jssora21l:hover { background-position: -123px -33px; }
            .jssora21r:hover { background-position: -183px -33px; }
            .jssora21ldn { background-position: -243px -33px; }
            .jssora21rdn { background-position: -303px -33px; }
        </style>
        <!-- Arrow Left -->
        <span u="arrowleft" class="jssora21l" style="width: 55px; height: 55px; top: 123px; left: 18px;">
        </span>
        <!-- Arrow Right -->
        <span u="arrowright" class="jssora21r" style="width: 55px; height: 55px; top: 123px; right: 20px">
        </span>
        <!-- Arrow Navigator Skin End -->
	</div>
{% comment %}    
<script>jssor_slider1_starter('slider1_container');</script>
{% endcomment %}

</div>
      
      
    </div>
          	{% endflag %}

  </div>

  <div class="panel panel-default active-panel">
<a {% flag section_now %}data-toggle="collapse"
	 data-parent="#accordion" href="#collapseFour"{% endflag %}>
  	    <div id="hub4" class="panel-heading">
      <div class="panel-title">
          Now
      </div>
      <div class="desc">Updates in Hub Mean Time (HMT)</div>
      <span class="glyphicon glyphicon-play"></span>
    </div>
      </a>
{% flag section_now %}
    <div id="collapseFour" class="panel-collapse collapse in">
      <div class="panel-body">
				<div id="nowtiles" data-masonry-options='{ "gutter": 30 }'>

					{% for post in now_posts %}
					<div class="nowtile">
						<div class="nowtileheader"><a href="/accounts/{{post.user.username}}/">{{post.user.username}}</a> |	{{post.user.get_profile.city}}, {{post.user.get_profile.country}}
						</div>
						{% if post.image_url %}
						<img src="{{post.image_url}}"
								 width="{{post.image_width}}"
								 height="{{post.image_height}}" /><br />
						{% endif %}
						<p>{{post.text|urlize|url_target_blank}}</p>
						<div class="nowtilefooter">
						<a target="_blank" href="{{post.external_link}}">{{post.created|timesince}} ago</a>
						</div>
					</div>
					{% endfor %}
				
     		</div>
				{% if now_posts.has_next %}
				<p id="now-nav"><a href="/?page={{now_posts.next_page_number}}">load more</a></p>
				{% endif %}
    </div>
  </div>
{% endflag %}
</div>

{% endif %}
{% endblock %}

{% block js %}
{% if request.user.is_anonymous %}
{% else %}
<script src="/media/js/flexslide/jquery.flexslider-min.js"></script>
<script src="/media/js/masonry.pkgd.js"></script>
<script src="/media/js/jssor.slider.mini.js"></script>
<script src="/media/js/jquery.infinitescroll.min.js"></script>

<link rel="stylesheet" href="/media/js/flexslide/flexslider.css" type="text/css">
<script>
	var $container = $('#nowtiles');
	// initialize
	$('#nowtiles').masonry({
    columnWidth: 40,
    itemSelector: '.nowtile'
  });

  $container.infinitescroll({
      navSelector  : '#now-nav',
      nextSelector : '#now-nav a',
      itemSelector : '.nowtile',

      errorCallback: function () { console.log('had an error'); },

      loading: {
          finishedMsg: 'No more pages to load.'
//          img: 'http://i.imgur.com/6RMhx.gif'
        }
      },

      // trigger Masonry as a callback
      function( newElements ) {
        // hide new items while they are loading
        var $newElems = $( newElements ).css({ opacity: 0 });
        // ensure that images load before adding to masonry layout
// imagesLoaded seems to be broken...
// going without for now..
//        $newElems.imagesLoaded(function(){
          // show elems now they're ready
          $newElems.animate({ opacity: 1 });
          $container.masonry( 'appended', $newElems, true );
//        });

// don't know why, but it seems that I need to manually
// detect the end of the scrolling and stop it
// or it does weird stuff...
        if ($newElems.length < 50) {
           $container.infinitescroll('destroy');
           return;
        }

      }
    );

</script>
  <script>
        jQuery(document).ready(function ($) {

            var _CaptionTransitions = [];
            _CaptionTransitions["L"] = { $Duration: 900, x: 0.6, $Easing: { $Left: $JssorEasing$.$EaseInOutSine }, $Opacity: 2 };
            _CaptionTransitions["R"] = { $Duration: 900, x: -0.6, $Easing: { $Left: $JssorEasing$.$EaseInOutSine }, $Opacity: 2 };
            _CaptionTransitions["T"] = { $Duration: 900, y: 0.6, $Easing: { $Top: $JssorEasing$.$EaseInOutSine }, $Opacity: 2 };
            _CaptionTransitions["B"] = { $Duration: 900, y: -0.6, $Easing: { $Top: $JssorEasing$.$EaseInOutSine }, $Opacity: 2 };
            _CaptionTransitions["ZMF|10"] = { $Duration: 900, $Zoom: 11, $Easing: { $Zoom: $JssorEasing$.$EaseOutQuad, $Opacity: $JssorEasing$.$EaseLinear }, $Opacity: 2 };
            _CaptionTransitions["RTT|10"] = { $Duration: 900, $Zoom: 11, $Rotate: 1, $Easing: { $Zoom: $JssorEasing$.$EaseOutQuad, $Opacity: $JssorEasing$.$EaseLinear, $Rotate: $JssorEasing$.$EaseInExpo }, $Opacity: 2, $Round: { $Rotate: 0.8} };
            _CaptionTransitions["RTT|2"] = { $Duration: 900, $Zoom: 3, $Rotate: 1, $Easing: { $Zoom: $JssorEasing$.$EaseInQuad, $Opacity: $JssorEasing$.$EaseLinear, $Rotate: $JssorEasing$.$EaseInQuad }, $Opacity: 2, $Round: { $Rotate: 0.5} };
            _CaptionTransitions["RTTL|BR"] = { $Duration: 900, x: -0.6, y: -0.6, $Zoom: 11, $Rotate: 1, $Easing: { $Left: $JssorEasing$.$EaseInCubic, $Top: $JssorEasing$.$EaseInCubic, $Zoom: $JssorEasing$.$EaseInCubic, $Opacity: $JssorEasing$.$EaseLinear, $Rotate: $JssorEasing$.$EaseInCubic }, $Opacity: 2, $Round: { $Rotate: 0.8} };
            _CaptionTransitions["CLIP|LR"] = { $Duration: 900, $Clip: 15, $Easing: { $Clip: $JssorEasing$.$EaseInOutCubic }, $Opacity: 2 };
            _CaptionTransitions["MCLIP|L"] = { $Duration: 900, $Clip: 1, $Move: true, $Easing: { $Clip: $JssorEasing$.$EaseInOutCubic} };
            _CaptionTransitions["MCLIP|R"] = { $Duration: 900, $Clip: 2, $Move: true, $Easing: { $Clip: $JssorEasing$.$EaseInOutCubic} };

            var options = {
                $FillMode: 1,                                       //[Optional] The way to fill image in slide, 0 stretch, 1 contain (keep aspect ratio and put all inside slide), 2 cover (keep aspect ratio and cover whole slide), 4 actual size, 5 contain for large image, actual size for small image, default value is 0
                $AutoPlay: true,                                    //[Optional] Whether to auto play, to enable slideshow, this option must be set to true, default value is false
                $AutoPlayInterval: 40000,                            //[Optional] Interval (in milliseconds) to go for next slide since the previous stopped if the slider is auto playing, default value is 3000
                $PauseOnHover: 1,                                   //[Optional] Whether to pause when mouse over if a slider is auto playing, 0 no pause, 1 pause for desktop, 2 pause for touch device, 3 pause for desktop and touch device, 4 freeze for desktop, 8 freeze for touch device, 12 freeze for desktop and touch device, default value is 1

                $ArrowKeyNavigation: true,   			            //[Optional] Allows keyboard (arrow key) navigation or not, default value is false
                //$SlideEasing: $JssorEasing$.$EaseOutQuint,          //[Optional] Specifies easing for right to left animation, default value is $JssorEasing$.$EaseOutQuad
                $SlideDuration: 2000,                               //[Optional] Specifies default duration (swipe) for slide in milliseconds, default value is 500
                $MinDragOffsetToSlide: 20,                          //[Optional] Minimum drag offset to trigger slide , default value is 20
                //$SlideWidth: 600,                                 //[Optional] Width of every slide in pixels, default value is width of 'slides' container
                //$SlideHeight: 300,                                //[Optional] Height of every slide in pixels, default value is height of 'slides' container
                $SlideSpacing: 0, 					                //[Optional] Space between each slide in pixels, default value is 0
                $DisplayPieces: 1,                                  //[Optional] Number of pieces to display (the slideshow would be disabled if the value is set to greater than 1), the default value is 1
                $ParkingPosition: 0,                                //[Optional] The offset position to park slide (this options applys only when slideshow disabled), default value is 0.
                $UISearchMode: 1,                                   //[Optional] The way (0 parellel, 1 recursive, default value is 1) to search UI components (slides container, loading screen, navigator container, arrow navigator container, thumbnail navigator container etc).
                $PlayOrientation: 1,                                //[Optional] Orientation to play slide (for auto play, navigation), 1 horizental, 2 vertical, 5 horizental reverse, 6 vertical reverse, default value is 1
                $DragOrientation: 1,                                //[Optional] Orientation to drag slide, 0 no drag, 1 horizental, 2 vertical, 3 either, default value is 1 (Note that the $DragOrientation should be the same as $PlayOrientation when $DisplayPieces is greater than 1, or parking position is not 0)

                $CaptionSliderOptions: {                            //[Optional] Options which specifies how to animate caption
                    $Class: $JssorCaptionSlider$,                   //[Required] Class to create instance to animate caption
                    $CaptionTransitions: _CaptionTransitions,       //[Required] An array of caption transitions to play caption, see caption transition section at jssor slideshow transition builder
                    $PlayInMode: 1,                                 //[Optional] 0 None (no play), 1 Chain (goes after main slide), 3 Chain Flatten (goes after main slide and flatten all caption animations), default value is 1
                    $PlayOutMode: 3                                 //[Optional] 0 None (no play), 1 Chain (goes before main slide), 3 Chain Flatten (goes before main slide and flatten all caption animations), default value is 1
                },

                $BulletNavigatorOptions: {                          //[Optional] Options to specify and enable navigator or not
                    $Class: $JssorBulletNavigator$,                 //[Required] Class to create navigator instance
                    $ChanceToShow: 2,                               //[Required] 0 Never, 1 Mouse Over, 2 Always
                    $AutoCenter: 1,                                 //[Optional] Auto center navigator in parent container, 0 None, 1 Horizontal, 2 Vertical, 3 Both, default value is 0
                    $Steps: 1,                                      //[Optional] Steps to go for each navigation request, default value is 1
                    $Lanes: 1,                                      //[Optional] Specify lanes to arrange items, default value is 1
                    $SpacingX: 8,                                   //[Optional] Horizontal space between each item in pixel, default value is 0
                    $SpacingY: 8,                                   //[Optional] Vertical space between each item in pixel, default value is 0
                    $Orientation: 1                                 //[Optional] The orientation of the navigator, 1 horizontal, 2 vertical, default value is 1
                },

                $ArrowNavigatorOptions: {                           //[Optional] Options to specify and enable arrow navigator or not
                    $Class: $JssorArrowNavigator$,                  //[Requried] Class to create arrow navigator instance
                    $ChanceToShow: 1,                               //[Required] 0 Never, 1 Mouse Over, 2 Always
                    $AutoCenter: 2,                                 //[Optional] Auto center arrows in parent container, 0 No, 1 Horizontal, 2 Vertical, 3 Both, default value is 0
                    $Steps: 1,                                    //[Optional] Steps to go for each navigation request, default value is 1
                    $Scale: false
                }
            };

            var jssor_slider1 = new $JssorSlider$("slider1_container", options);

            //responsive code begin
            //you can remove responsive code if you don't want the slider scales while window resizes
            function ScaleSlider() {
                var bodyWidth = document.body.clientWidth;
                if (bodyWidth)
                    jssor_slider1.$SetScaleWidth(Math.min(bodyWidth, 1920));
                else
                    window.setTimeout(ScaleSlider, 30);
            }

            ScaleSlider();

            if (!navigator.userAgent.match(/(iPhone|iPod|iPad|BlackBerry|IEMobile)/)) {
                $(window).bind('resize', ScaleSlider);
            }


            //if (navigator.userAgent.match(/(iPhone|iPod|iPad)/)) {
            //    $(window).bind("orientationchange", ScaleSlider);
            //}
            //responsive code end
        });
    </script>

<script>
$(".panel").on('hidden.bs.collapse', function (e) {
   $(e.target).parent().removeClass('active-panel');
});
$(".panel").on('shown.bs.collapse', function (e) {
   $(e.target).parent().addClass('active-panel');
});
</script>


{% endif %}
{% endblock %}
